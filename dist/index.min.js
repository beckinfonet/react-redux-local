!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("redux"),require("react"),require("prop-types"),require("redux-saga")):"function"==typeof define&&define.amd?define(["exports","redux","react","prop-types","redux-saga"],t):t(e["react-redux-local"]={},e.redux,e.React,e.propTypes,e.createSagaMiddleware)}(this,function(e,t,r,o,n){"use strict";var s="default"in t?t.default:t,i="default"in r?r.default:r;n=n&&n.hasOwnProperty("default")?n.default:n;var a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var c,d,u=(function(e,t){var r=s.compose;t.__esModule=!0,t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},t.devToolsEnhancer=function(){return function(e){return e}}}(c={exports:{}},c.exports),c.exports);(d=u)&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default");var l=u.composeWithDevTools;class p extends r.Component{constructor(e){super(e),this.dispatch=((e={})=>this.store.dispatch(e));const{reducer:r,saga:o,middleware:s,actions:i,devToolsOptions:a}=e;this.sagaMiddleware=o&&n&&n();const c=[...s];this.sagaMiddleware&&c.push(this.sagaMiddleware);const d=t.applyMiddleware(...c),u=l(a);this.state=r(void 0,{}),this.store=t.createStore(r,a?u(d):d),this.store.subscribe(()=>this.setState(this.store.getState())),this.sagaMiddleware&&(this.saga=this.sagaMiddleware.run(o)),this.boundActions=t.bindActionCreators(i,this.dispatch)}componentWillUnMount(){this.sagaMiddleware&&this.saga.cancel()}render(){return this.props.children(this.state,this.boundActions,this.dispatch)}}p.propTypes={reducer:o.func.isRequired,actions:o.objectOf(o.func.isRequired).isRequired,saga:o.func,middleware:o.arrayOf(o.func.isRequired),children:o.func.isRequired,devToolsOptions:o.object},p.defaultProps={middleware:[]};var f="[object AsyncFunction]",h="[object Function]",b="[object GeneratorFunction]",v="[object Null]",y="[object Proxy]",m="[object Undefined]",j="object"==typeof self&&self&&self.Object===Object&&self,g="object"==typeof a&&a&&a.Object===Object&&a||j||Function("return this")(),w=Object.prototype,x=w.hasOwnProperty,O=w.toString,M=g.Symbol,q=M?M.toStringTag:void 0;function P(e){return null==e?void 0===e?m:v:q&&q in Object(e)?function(e){var t=x.call(e,q),r=e[q];try{e[q]=void 0}catch(e){}var o=O.call(e);t?e[q]=r:delete e[q];return o}(e):function(e){return O.call(e)}(e)}var S=function(e){if(!function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}(e))return!1;var t=P(e);return t==h||t==b||t==f||t==y};class T extends r.PureComponent{render(){const{children:e,state:t,actions:r,dispatch:o}=this.props;return e(t,r,o)}}e.default=p,e.createContext=(e=>{if(!e.reducer)throw Error("A reducer must be provided.");if(!e.actions)throw Error("A set of actions must be provided.");const{Provider:t,Consumer:o}=r.createContext(),n=()=>void 0;return{Provider:({children:r})=>i.createElement(p,e,(e,o,n)=>i.createElement(t,{value:{state:e,actions:o,dispatch:n}},r)),Consumer:({children:e,mapState:t=n,mapActions:r=(()=>void 0)})=>i.createElement(o,null,({state:o,actions:n,dispatch:s})=>i.createElement(T,{state:S(t)?t(o):void 0,actions:r(n,s),dispatch:s},e))}}),Object.defineProperty(e,"__esModule",{value:!0})});
